{"ast":null,"code":"import axios from 'axios';\nimport { viewport, getCookie, setCookie, isMobile, showFooter, validateUrl, isMVA, iOSAPP, androidAPP } from '../components/common/Helpers';\nimport { MOCK_ENABLED } from '../constants';\nexport const addRequestHeader = (request = {}) => {\n  const header = {};\n  request.header = { ...(request.header || {}),\n    ...header\n  };\n  return request;\n};\nconst DESKTOP_CHANNEL_ID = 'VZW-DOTCOM';\nconst MOBILE_CHANNEL_ID = 'VZW-DOTCOM-MOB';\nconst TABLET_CHANNEL_ID = 'VZW-DOTCOM-TAB';\nexport const getChannelId = () => {\n  let channelId = DESKTOP_CHANNEL_ID; // if (viewport() === 'desktop') {\n  //   channelId = DESKTOP_CHANNEL_ID;\n  // }\n  // if (viewport() === 'mobile') {\n  //   channelId = MOBILE_CHANNEL_ID;\n  // }\n  // if (viewport() === 'tablet') {\n  //   channelId = TABLET_CHANNEL_ID;\n  // }\n\n  return channelId;\n};\nexport const HttpService = MOCK_ENABLED ? axios.create({\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    channelId: getChannelId(),\n    'Content-Type': 'application/json',\n    includeCookies: true,\n    'x-soe-apikey': 'uFWjzl4du5e46whYg73iCGqriX2l62C9',\n    sso_jwt: ''\n  }\n}) : axios.create({\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    channelId: getChannelId()\n  }\n});\nHttpService.interceptors.request.use(req => {\n  const request = req; // add header e2erequestid Removing e2erequestid from UI handling from IG\n  // request.headers.e2erequestid = generateRequestId(); // Don't uncomment it.\n  // add header X-XSRF-TOKEN for payment APIs\n  // const paymentRegex = new RegExp('/paymentservice/');\n  // if (req.url.search(paymentRegex) !== -1) {\n  //   request.headers['X-XSRF-TOKEN'] = getCookie('xsrf-token');\n  //   request.withCredentials = true; // XSRF-TOKEN cookie should be sent in request as well\n  // }\n  // if (req.url.search('/onedp/api/') !== -1) {\n  //   request.headers['p-csrf-token'] = getCookie('p_csrftkn') || null;\n  // }\n\n  return request;\n});\nHttpService.interceptors.response.use(response => {\n  const requestUrl = response && response.config && response.config.url || '';\n\n  if (requestUrl.indexOf('omnidlservice/readDL') > 0) {\n    if (false) {// setTimeout(() => showFooter(), 2000);\n    }\n  } else {\n    window.sessionStorage.setItem('e2erequestid', response && response.headers && response.headers.e2erequestid || '');\n  }\n\n  window.sessionStorage.setItem('cartid', response && response.headers && response.headers.cartid || '');\n\n  if (response.data.goToUrl !== undefined) {// window.location.href = validateUrl(`${decodeURIComponent(response.data.goToUrl)}&goto=${window.location.href}`);\n  } // console.log(response);\n\n\n  const enableReadFromCookie = getCookie('ENABLE_READ_FROM_COOKIE');\n\n  if (enableReadFromCookie === 'YES') {\n    if (response && response.headers && response.headers.vzwaccountnumber) {// setCookie('customerId', response.headers.vzwaccountnumber);\n    }\n\n    if (response && response.headers && response.headers.mobile) {// setCookie('mtn', response.headers.mobile);\n    }\n  } // if (!isMobile() && !isMVA()) {\n  //   setTimeout(() => showFooter(), 2000);\n  // }\n\n\n  return response;\n});","map":{"version":3,"sources":["C:/Users/Naveen/Desktop/Final/FEEngineer_Assignment/coding-test/src/services/HttpService.js"],"names":["axios","viewport","getCookie","setCookie","isMobile","showFooter","validateUrl","isMVA","iOSAPP","androidAPP","MOCK_ENABLED","addRequestHeader","request","header","DESKTOP_CHANNEL_ID","MOBILE_CHANNEL_ID","TABLET_CHANNEL_ID","getChannelId","channelId","HttpService","create","headers","Accept","includeCookies","sso_jwt","interceptors","use","req","response","requestUrl","config","url","indexOf","window","sessionStorage","setItem","e2erequestid","cartid","data","goToUrl","undefined","enableReadFromCookie","vzwaccountnumber","mobile"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n  viewport, getCookie, setCookie, isMobile, showFooter, validateUrl, isMVA, iOSAPP, androidAPP,\n} from '../components/common/Helpers';\nimport { MOCK_ENABLED } from '../constants';\n\nexport const addRequestHeader = (request = {}) => {\n  const header = {};\n  request.header = { ...(request.header || {}), ...header };\n  return request;\n};\n\nconst DESKTOP_CHANNEL_ID = 'VZW-DOTCOM';\nconst MOBILE_CHANNEL_ID = 'VZW-DOTCOM-MOB';\nconst TABLET_CHANNEL_ID = 'VZW-DOTCOM-TAB';\n\nexport const getChannelId = () => {\n  let channelId = DESKTOP_CHANNEL_ID;\n  // if (viewport() === 'desktop') {\n  //   channelId = DESKTOP_CHANNEL_ID;\n  // }\n  // if (viewport() === 'mobile') {\n  //   channelId = MOBILE_CHANNEL_ID;\n  // }\n  // if (viewport() === 'tablet') {\n  //   channelId = TABLET_CHANNEL_ID;\n  // }\n  return channelId;\n};\n\nexport const HttpService = MOCK_ENABLED\n  ? axios.create({\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      channelId: getChannelId(),\n      'Content-Type': 'application/json',\n      includeCookies: true,\n      'x-soe-apikey': 'uFWjzl4du5e46whYg73iCGqriX2l62C9',\n      sso_jwt: '',\n    }\n  }) : axios.create({\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      channelId: getChannelId(),\n    },\n  });\n\nHttpService.interceptors.request.use((req) => {\n  const request = req;\n\n  // add header e2erequestid Removing e2erequestid from UI handling from IG\n  // request.headers.e2erequestid = generateRequestId(); // Don't uncomment it.\n\n  // add header X-XSRF-TOKEN for payment APIs\n  // const paymentRegex = new RegExp('/paymentservice/');\n  // if (req.url.search(paymentRegex) !== -1) {\n  //   request.headers['X-XSRF-TOKEN'] = getCookie('xsrf-token');\n  //   request.withCredentials = true; // XSRF-TOKEN cookie should be sent in request as well\n  // }\n\n  // if (req.url.search('/onedp/api/') !== -1) {\n  //   request.headers['p-csrf-token'] = getCookie('p_csrftkn') || null;\n  // }\n\n  return request;\n});\n\nHttpService.interceptors.response.use((response) => {\n  const requestUrl = (response && response.config && response.config.url) || '';\n  if (requestUrl.indexOf('omnidlservice/readDL') > 0) {\n    if (false) {\n      // setTimeout(() => showFooter(), 2000);\n    }\n  } else {\n    window.sessionStorage.setItem('e2erequestid', (response && response.headers && response.headers.e2erequestid) || '');\n  }\n  window.sessionStorage.setItem('cartid', (response && response.headers && response.headers.cartid) || '');\n\n  if (response.data.goToUrl !== undefined) {\n    // window.location.href = validateUrl(`${decodeURIComponent(response.data.goToUrl)}&goto=${window.location.href}`);\n  }\n  // console.log(response);\n  const enableReadFromCookie = getCookie('ENABLE_READ_FROM_COOKIE');\n  if (enableReadFromCookie === 'YES') {\n    if (response && response.headers && response.headers.vzwaccountnumber) {\n      // setCookie('customerId', response.headers.vzwaccountnumber);\n    }\n    if (response && response.headers && response.headers.mobile) {\n      // setCookie('mtn', response.headers.mobile);\n    }\n  }\n  // if (!isMobile() && !isMVA()) {\n  //   setTimeout(() => showFooter(), 2000);\n  // }\n  return response;\n});\n"]},"metadata":{},"sourceType":"module"}