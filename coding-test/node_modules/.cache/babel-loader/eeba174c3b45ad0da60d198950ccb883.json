{"ast":null,"code":"import axios from 'axios';\nimport { viewport, getCookie, setCookie, isMobile, showFooter, validateUrl, isMVA, iOSAPP, androidAPP } from '../components/common/Helpers';\nimport { MOCK_ENABLED } from '../constants';\nexport const addRequestHeader = (request = {}) => {\n  const header = {};\n  request.header = { ...(request.header || {}),\n    ...header\n  };\n  return request;\n};\nconst DESKTOP_CHANNEL_ID = 'VZW-DOTCOM';\nconst MOBILE_CHANNEL_ID = 'VZW-DOTCOM-MOB';\nconst TABLET_CHANNEL_ID = 'VZW-DOTCOM-TAB';\nexport const getChannelId = () => {\n  let channelId = DESKTOP_CHANNEL_ID;\n\n  if (viewport() === 'desktop') {\n    channelId = DESKTOP_CHANNEL_ID;\n  }\n\n  if (viewport() === 'mobile') {\n    channelId = MOBILE_CHANNEL_ID;\n  }\n\n  if (viewport() === 'tablet') {\n    channelId = TABLET_CHANNEL_ID;\n  }\n\n  return channelId;\n};\nexport const HttpService = MOCK_ENABLED ? axios.create({\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    channelId: getChannelId(),\n    'Content-Type': 'application/json',\n    includeCookies: true,\n    'x-soe-apikey': 'uFWjzl4du5e46whYg73iCGqriX2l62C9',\n    sso_jwt: ''\n  }\n}) : axios.create({\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    channelId: getChannelId()\n  }\n});\nHttpService.interceptors.request.use(req => {\n  const request = req; // add header e2erequestid Removing e2erequestid from UI handling from IG\n  // request.headers.e2erequestid = generateRequestId(); // Don't uncomment it.\n  // add header X-XSRF-TOKEN for payment APIs\n\n  const paymentRegex = new RegExp('/paymentservice/');\n\n  if (req.url.search(paymentRegex) !== -1) {\n    request.headers['X-XSRF-TOKEN'] = getCookie('xsrf-token');\n    request.withCredentials = true; // XSRF-TOKEN cookie should be sent in request as well\n  }\n\n  if (req.url.search('/onedp/api/') !== -1) {\n    request.headers['p-csrf-token'] = getCookie('p_csrftkn') || null;\n  }\n\n  return request;\n});\nHttpService.interceptors.response.use(response => {\n  const requestUrl = response && response.config && response.config.url || '';\n\n  if (requestUrl.indexOf('omnidlservice/readDL') > 0) {\n    if (!isMobile() && !isMVA()) {\n      setTimeout(() => showFooter(), 2000);\n    }\n  } else {\n    window.sessionStorage.setItem('e2erequestid', response && response.headers && response.headers.e2erequestid || '');\n  }\n\n  window.sessionStorage.setItem('cartid', response && response.headers && response.headers.cartid || '');\n\n  if (response.data.goToUrl !== undefined) {\n    window.location.href = validateUrl(`${decodeURIComponent(response.data.goToUrl)}&goto=${window.location.href}`);\n  } // console.log(response);\n\n\n  const enableReadFromCookie = getCookie('ENABLE_READ_FROM_COOKIE');\n\n  if (enableReadFromCookie === 'YES') {\n    if (response && response.headers && response.headers.vzwaccountnumber) {\n      setCookie('customerId', response.headers.vzwaccountnumber);\n    }\n\n    if (response && response.headers && response.headers.mobile) {\n      setCookie('mtn', response.headers.mobile);\n    }\n  } // if (!isMobile() && !isMVA()) {\n  //   setTimeout(() => showFooter(), 2000);\n  // }\n\n\n  return response;\n});","map":{"version":3,"sources":["C:/Users/Naveen/Desktop/Final/FEEngineer_Assignment/coding-test/src/services/HttpService.js"],"names":["axios","viewport","getCookie","setCookie","isMobile","showFooter","validateUrl","isMVA","iOSAPP","androidAPP","MOCK_ENABLED","addRequestHeader","request","header","DESKTOP_CHANNEL_ID","MOBILE_CHANNEL_ID","TABLET_CHANNEL_ID","getChannelId","channelId","HttpService","create","headers","Accept","includeCookies","sso_jwt","interceptors","use","req","paymentRegex","RegExp","url","search","withCredentials","response","requestUrl","config","indexOf","setTimeout","window","sessionStorage","setItem","e2erequestid","cartid","data","goToUrl","undefined","location","href","decodeURIComponent","enableReadFromCookie","vzwaccountnumber","mobile"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n  viewport, getCookie, setCookie, isMobile, showFooter, validateUrl, isMVA, iOSAPP, androidAPP,\n} from '../components/common/Helpers';\nimport { MOCK_ENABLED } from '../constants';\n\nexport const addRequestHeader = (request = {}) => {\n  const header = {};\n  request.header = { ...(request.header || {}), ...header };\n  return request;\n};\n\nconst DESKTOP_CHANNEL_ID = 'VZW-DOTCOM';\nconst MOBILE_CHANNEL_ID = 'VZW-DOTCOM-MOB';\nconst TABLET_CHANNEL_ID = 'VZW-DOTCOM-TAB';\n\nexport const getChannelId = () => {\n  let channelId = DESKTOP_CHANNEL_ID;\n  if (viewport() === 'desktop') {\n    channelId = DESKTOP_CHANNEL_ID;\n  }\n  if (viewport() === 'mobile') {\n    channelId = MOBILE_CHANNEL_ID;\n  }\n  if (viewport() === 'tablet') {\n    channelId = TABLET_CHANNEL_ID;\n  }\n  return channelId;\n};\n\nexport const HttpService = MOCK_ENABLED\n  ? axios.create({\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      channelId: getChannelId(),\n      'Content-Type': 'application/json',\n      includeCookies: true,\n      'x-soe-apikey': 'uFWjzl4du5e46whYg73iCGqriX2l62C9',\n      sso_jwt: '',\n    }\n  }) : axios.create({\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      channelId: getChannelId(),\n    },\n  });\n\nHttpService.interceptors.request.use((req) => {\n  const request = req;\n\n  // add header e2erequestid Removing e2erequestid from UI handling from IG\n  // request.headers.e2erequestid = generateRequestId(); // Don't uncomment it.\n\n  // add header X-XSRF-TOKEN for payment APIs\n  const paymentRegex = new RegExp('/paymentservice/');\n  if (req.url.search(paymentRegex) !== -1) {\n    request.headers['X-XSRF-TOKEN'] = getCookie('xsrf-token');\n    request.withCredentials = true; // XSRF-TOKEN cookie should be sent in request as well\n  }\n\n  if (req.url.search('/onedp/api/') !== -1) {\n    request.headers['p-csrf-token'] = getCookie('p_csrftkn') || null;\n  }\n\n  return request;\n});\n\nHttpService.interceptors.response.use((response) => {\n  const requestUrl = (response && response.config && response.config.url) || '';\n  if (requestUrl.indexOf('omnidlservice/readDL') > 0) {\n    if (!isMobile() && !isMVA()) {\n      setTimeout(() => showFooter(), 2000);\n    }\n  } else {\n    window.sessionStorage.setItem('e2erequestid', (response && response.headers && response.headers.e2erequestid) || '');\n  }\n  window.sessionStorage.setItem('cartid', (response && response.headers && response.headers.cartid) || '');\n\n  if (response.data.goToUrl !== undefined) {\n    window.location.href = validateUrl(`${decodeURIComponent(response.data.goToUrl)}&goto=${window.location.href}`);\n  }\n  // console.log(response);\n  const enableReadFromCookie = getCookie('ENABLE_READ_FROM_COOKIE');\n  if (enableReadFromCookie === 'YES') {\n    if (response && response.headers && response.headers.vzwaccountnumber) {\n      setCookie('customerId', response.headers.vzwaccountnumber);\n    }\n    if (response && response.headers && response.headers.mobile) {\n      setCookie('mtn', response.headers.mobile);\n    }\n  }\n  // if (!isMobile() && !isMVA()) {\n  //   setTimeout(() => showFooter(), 2000);\n  // }\n  return response;\n});\n"]},"metadata":{},"sourceType":"module"}